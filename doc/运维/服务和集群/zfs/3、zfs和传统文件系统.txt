ZFS文件系统粒度：
    传统文件系统局限于单个设备，因而其大小以设备的大小为限。由于存在大小限制，因此创建和重新创建传统文件系统很耗时，有时候还很难
    ZFS不局限于特定设备，因此可以轻松、快捷地创建。ZFS文件系统会在分配给其所驻留的存储池的磁盘空间中自动增大
    要管理许多用户子目录，可以为每个用户创建一个文件系统，而不是只创建一个文件系统（如 /export/home）
    通过应用可被分层结构中包含的后代文件系统继承的属性，可以轻松设置和管理许多文件系统


zfs磁盘空间记账：
    ZFS建立在池存储概念的基础上。与传统文件系统不同，池中的所有ZFS文件系统都共享该池中的可用存储器
    因此，即使文件系统处于非活动状态，使用程序(例如 df)报告的可用磁盘空间也会发生变化，因为池中的其他文件系统会使用或释放磁盘空间
    使用配额可以限制最大文件系统大小。可以利用预留空间保证一个文件系统拥有指定大小的磁盘空间
    ZFS中的所有元数据都是动态分配的。因此不需要初始空间成本，并且文件数只受可用磁盘空间的限制
    ZFS是事务性文件系统
    对df命令与zfs list命令报告的空间占用进行比较时，请注意，df报告的是池大小而不仅仅是文件系统大小
    此外，df 不了解后代文件系统或快照是否存在。如果在文件系统上设置了ZFS属性(如压缩和配额)，则协df报告的空间占用可能产生误差


    可能影响所报告的空间占用的情况
        对于大于recordsize的文件，文件的最后一个数据块通常只填充大约1/2
        当缺省recordsize设置为128 KB时，每个文件浪费大约64KB，这可能影响很大
        通过启用压缩可解决此问题。即使数据已压缩，最后一个数据块的未使用部分也将以零填充，且压缩非常好。

        在 RAIDZ-2 池上，每个数据块至少要占用2个扇区（512 字节块）来存储奇偶校验信息
        奇偶校验信息所占用的空间不会被报告，但是因为它可能是变化的，且在小数据块中所占的百分比更大，因此对空间报告可能有显著影响
        对于设置为512字节 recordsize，影响更为明显，其中每个512字节的逻辑数据块都占用1.5 KB
        不管存储什么数据，如果您最关注的是空间效率，则应该将recordsize保留为缺省值 (128 KB)，并启用压缩

        注：recordsize为文件系统中的文件建议的块大小，默认为128K


空间不足行为：
    文件系统的快照开销很小，并且很容易在ZFS中创建。在大多数ZFS环境中，快照是常见现象
    尝试释放磁盘空间时，快照的存在会引起某种意外行为。通常，获取适当的权限后，可从整个文件系统中删除一个文件，此操作会使文件系统有更多的可用磁盘空间
    但是，如果要删除的文件存在于文件系统的快照中，则删除该文件不会获得任何磁盘空间。快照将继续引用该文件使用的块
    由于需要创建新版本的目录来反映名称空间的新状态，因此删除文件会占用更多的磁盘空间。此行为意味着，尝试删除文件时可能收到意外的 ENOSPC 或 EDQUOT 错误



传统文件系统：
    传统文件系统都会预分配其大量元数据。因此，创建文件系统时，此元数据需要直接占用空间。此行为还意味着文件系统支持的文件总数是预先确定的

    传统文件系统将修改都捆绑到事务组中，并异步提交至磁盘。这些修改在被提交到磁盘之前称为暂挂更改
    已用磁盘空间量、可用磁盘空间量以及文件或文件系统引用的磁盘空间量并不考虑暂挂更改。通常，暂挂更改仅占用几秒钟的时间
    即使使用fsync提交对磁盘的更改，也不一定能保证有关磁盘空间使用情况的信息会立即更新
